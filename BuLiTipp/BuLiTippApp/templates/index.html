{% extends "base_site.html" %}

<!-- benötigte Variablen: spielzeiten, spieltipp_previous, spieltipp_next -->
{% load i18n  %}
{% block breadcrumbs %}
    <div class="breadcrumbs">
    <a href="{% url BuLiTippApp.views.home %}">{% trans 'Home' %}</a>
    {% if title %} &rsaquo; {{ title }}{% endif %}
    {% if aktuelle_spielzeit.id %}
    -&rsaquo;
    <a href="{% url BuLiTippApp.views.index aktuelle_spielzeit.id %}">{{ aktuelle_spielzeit.bezeichner }}</a>
    {% endif %}
    </div>
{% endblock %}


{% block content %}
<h1>BuLiTipp</h1>
Ideen für weitere Inhalte oder Änderungen/Kritik/Gestaltung gerne an: <a href="mailto:cdanzmann@gmail.com">cdanzmann@gmail.com</a>
<h2>Was du hier alles machen kannst:</h2>
<ul>
	<li>einmalig: oben rechts auf registrieren klicken und dich selbst registrieren, am Besten mit eMail!</li>
	<li>Weiter unten eine Liga auswählen, z.B.: Bundesliga oder DFB Pokal</li>
	<li>Spieltage tippen</li>
	<li>Spieltage kommentieren</li>
	<li>usw...</li>
</ul>

<h2>Was ist das hier?</h2>
<ul>
	<li>Christian hat eine neue Programmiersprache gelernt(<a href="http://python.org" target="_blank">Python</a>)</li>
	<li>und hat dazu ein Beispielprojekt gesucht, und das hier ist draus geworden!</li>
	<li>Der Quellcode ist verfügbar unter <a href="http://github.com/laDanz/BuLiTipp" target="_blank">github.com</a></li>
</ul>

<hr>
<!-- Wenn mehrere Saisons vorhanden -> Saison ausählen -->
{% if user.is_authenticated %}

{% if spielzeiten|length > 1 %}
	<h2>Bitte Spielzeit auswählen({{spielzeiten|length}}):</h2>
		<ul>
		{% for spielzeit in spielzeiten %}
			<li><a href="{% url BuLiTippApp.views.index spielzeit.id %}">{{spielzeit.bezeichner}} auswählen</a></li>
		{% endfor %}
		</ul>

{% endif %}

{% endif %}

{% if spielzeiten|length == 0 %}
	{% if spieltipp_previous %}

		<div>
			<div style="float:left">
				<h2>Die Ergebnisse des letzten Spieltages:</h2>
				{% with spieltag=spieltipp_previous.0.0.spieltag _no_navigation_="true" spieltipp=spieltipp_previous kommentare=spieltipp_previous.0.0.spieltag.kommentar_set.all %}
				Hier die Übersicht des {{spieltag.nummer}}. Spieltages!

				{% include "spieltag/inline.html" %}
			</div>
			{% if not spieltag.is_tippable %}
			        {% with userpunkteplatz=aktuelle_spielzeit.userpunkteplatz %}
			                <div style="float:right; padding:15px;">
					<b>Saisonverlauf:</b>
				                {% include "bestenliste/inline.html" %}
			                </div>
			        {% endwith %}
			{% endif %}
			<div style="clear:both"></div>
		</div>


		{% include "kommentar/detail.html" %}

		{% endwith %}

	{% endif %}

	{% if spieltipp_next %}
		<h2>Hier der nächste Spieltag!</h2>
		{% with spieltag=spieltipp_next.0.0.spieltag no_navigation="true" spieltipp=spieltipp_next  %}
		Tippen noch möglich bis zum <strong>{{spieltag.datum}}</strong>!
		{% include "spieltag/inline.html" %}

		{% with kommentare=spieltag.kommentar_set.all %}
			{% include "kommentar/detail.html" %}
		{% endwith %}

		{% endwith %}
	{% endif %}
{% endif %}

{% endblock %}
